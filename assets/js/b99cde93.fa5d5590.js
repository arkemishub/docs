"use strict";(self.webpackChunkarke=self.webpackChunkarke||[]).push([[573],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>m});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),c=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=c(e.components);return r.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},k=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),k=c(n),m=a,u=k["".concat(s,".").concat(m)]||k[m]||d[m]||i;return n?r.createElement(u,l(l({ref:t},p),{},{components:n})):r.createElement(u,l({ref:t},p))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,l=new Array(i);l[0]=k;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:a,l[1]=o;for(var c=2;c<i;c++)l[c]=n[c];return r.createElement.apply(null,l)}return r.createElement.apply(null,n)}k.displayName="MDXCreateElement"},14092:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>d,frontMatter:()=>i,metadata:()=>o,toc:()=>c});var r=n(87462),a=(n(67294),n(3905));const i={id:"client-js",title:"Client JS"},l=void 0,o={unversionedId:"docs/web/client-js",id:"docs/web/client-js",title:"Client JS",description:"Client JS is an isomorphic JavaScript client for Arke. Through the client SDK",source:"@site/docs/docs/web/client-js.md",sourceDirName:"docs/web",slug:"/docs/web/client-js",permalink:"/arke-docs/docs/web/client-js",draft:!1,editUrl:"https://github.com/arkemishub/arke-docs/docs/docs/web/client-js.md",tags:[],version:"current",frontMatter:{id:"client-js",title:"Client JS"},sidebar:"docs",previous:{title:"Refresh token",permalink:"/arke-docs/docs/server/rest/refresh-tokens"},next:{title:"UI Kit",permalink:"/arke-docs/docs/web/ui-kit"}},s={},c=[{value:"Install",id:"install",level:2},{value:"Init your SDK",id:"init-your-sdk",level:2},{value:"Client Authentication",id:"client-authentication",level:2},{value:"Sign in",id:"sign-in",level:3},{value:"Verify &amp; Refresh token",id:"verify--refresh-token",level:3},{value:"Arke methods",id:"arke-methods",level:2},{value:"Units methods",id:"units-methods",level:2},{value:"Offset &amp; limits",id:"offset--limits",level:2},{value:"Filters",id:"filters",level:2},{value:"Sort",id:"sort",level:2}],p={toc:c};function d(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Client JS is an isomorphic JavaScript client for Arke. Through the client SDK\nyou can use simplified methods to interact with the arke server."),(0,a.kt)("h2",{id:"install"},"Install"),(0,a.kt)("p",null,"First of all, you need to install the library:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"npm install @arkejs/client\n")),(0,a.kt)("h2",{id:"init-your-sdk"},"Init your SDK"),(0,a.kt)("p",null,"Then you're able to import the library and establish the connection with the server:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"import { initializeClient } from '@arkejs/client'\n\n// Create a single arke js instance for interacting with your server\nconst getClient = () => initializeClient({\n    serverUrl: process.env.ARKE_SERVER_URL,\n    arkeProjectKey: 'test_project',\n    auth: { cookieName: 'arke-auth' },\n});\n")),(0,a.kt)("admonition",{type:"success"},(0,a.kt)("p",{parentName:"admonition"},"For react environment you can create a useful hooks ",(0,a.kt)("inlineCode",{parentName:"p"},"useClient")," to get the client"),(0,a.kt)("pre",{parentName:"admonition"},(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"export default function useClient() {\n  return getClient();\n}\n"))),(0,a.kt)("h2",{id:"client-authentication"},"Client Authentication"),(0,a.kt)("p",null,"The auth class provides useful methods to authenticate, and manage the security of the APIs through the JWT authentication."),(0,a.kt)("h3",{id:"sign-in"},"Sign in"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"client.auth\n    .signIn({ username: 'username', password: 'password' })\n    .then((res) => {\n        const session = res.data.content;\n        client.auth.setAuthCookie(session);\n    })\n    .catch((err) => console.log(err));\n")),(0,a.kt)("h3",{id:"verify--refresh-token"},"Verify & Refresh token"),(0,a.kt)("p",null,"To validate our session you have to call the verify token API to check that session is still alive,\notherwise it will be necessary call the refresh token API to generate new token."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"}," client.auth\n    .verifyToken(verifyToken)\n    .then((res) => {\n        // Token is verified\n    })\n    .catch((err) => {\n        // Token is expired -> try to refresh token\n        client.auth\n            .refreshToken(refresh_token)\n            .then((res) => {\n                const refreshedToken = res.data;\n                console.log(refreshedToken)\n            })\n            .catch((err) => {\n                // Logout session\n                console.log(err)\n            });\n    })\n")),(0,a.kt)("p",null,"Looks our guides to use Arke authentication through ",(0,a.kt)("a",{parentName:"p",href:"https://next-auth.js.org/"},"NextAuth.js")),(0,a.kt)("h2",{id:"arke-methods"},"Arke methods"),(0,a.kt)("p",null,"The arke class provides useful methods to manage Arke and its associated parameters."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"client.arke.[method]\n")),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},(0,a.kt)("strong",{parentName:"th"},"Method")),(0,a.kt)("th",{parentName:"tr",align:null},(0,a.kt)("strong",{parentName:"th"},"Description")))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"baseStruct(config)"),(0,a.kt)("td",{parentName:"tr",align:null},"Get the structure of generic Arke")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"getAll(config)"),(0,a.kt)("td",{parentName:"tr",align:null},"Get All Arke")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"get(arkeId, config)"),(0,a.kt)("td",{parentName:"tr",align:null},"Get specific Arke")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"struct(arkeId, config)"),(0,a.kt)("td",{parentName:"tr",align:null},"Get the structure of a specific Arke")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"create(arkeId, data, config)"),(0,a.kt)("td",{parentName:"tr",align:null},"Create an Arke with data")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"edit(arkeId, data, config)"),(0,a.kt)("td",{parentName:"tr",align:null},"Edit a specific Arke")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"delete(arkeId, config)"),(0,a.kt)("td",{parentName:"tr",align:null},"Delete a specific Arke")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"addParameter(arkeId, parameterType, parameterId, config)"),(0,a.kt)("td",{parentName:"tr",align:null},"Add parameter to an Arke")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"removeParameter(arkeId, parameterType, parameterId, config)"),(0,a.kt)("td",{parentName:"tr",align:null},"Remove parameter to an Arke")))),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"For config param see ",(0,a.kt)("a",{parentName:"p",href:"https://axios-http.com/docs/req_config"},"Axios documentation"))),(0,a.kt)("h2",{id:"units-methods"},"Units methods"),(0,a.kt)("p",null,"The arke class provides useful methods to manage Arke and its associated parameters."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"client.unit.[method]\n")),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},(0,a.kt)("strong",{parentName:"th"},"Method")),(0,a.kt)("th",{parentName:"tr",align:null},(0,a.kt)("strong",{parentName:"th"},"Description")))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"baseStruct(config)"),(0,a.kt)("td",{parentName:"tr",align:null},"Get the structure of generic Arke")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"getAll(arkeId, config)"),(0,a.kt)("td",{parentName:"tr",align:null},"Get All Units")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"get(arkeId, unitId, config)"),(0,a.kt)("td",{parentName:"tr",align:null},"Get specific Unit")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"struct(arkeId, unitId, config)"),(0,a.kt)("td",{parentName:"tr",align:null},"Get the structure of a specific Unit")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"create(arkeId, data, config)"),(0,a.kt)("td",{parentName:"tr",align:null},"Create an Unit with data")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"edit(arkeId, unitId, data, config)"),(0,a.kt)("td",{parentName:"tr",align:null},"Edit a specific Unit")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"delete(arkeId, unitId, config)"),(0,a.kt)("td",{parentName:"tr",align:null},"Delete a specific Unit")))),(0,a.kt)("h2",{id:"offset--limits"},"Offset & limits"),(0,a.kt)("p",null,"For each ",(0,a.kt)("inlineCode",{parentName:"p"},"GET")," methods on Arke, Units, Parameters etc. are available dedicated parameters\nto limits the response "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"client.arke\n    .getAll({ params: {\n        offset: 0, \n        limit: 20,\n    }})\n    .then((res) => {\n        // limit response to 20 Arke\n    })\n")),(0,a.kt)("h2",{id:"filters"},"Filters"),(0,a.kt)("p",null,"For each ",(0,a.kt)("inlineCode",{parentName:"p"},"GET")," methods on Arke, Units, Parameters etc. are available dedicated parameters\nto filter the response through the logic operation"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"client.arke\n    .getAll({ params: {\n        filter: `eq(arke_id,invoice)`,\n    }})\n    .then((res) => {\n        // limit response to 20 Arke\n    })\n")),(0,a.kt)("admonition",{type:"success"},(0,a.kt)("p",{parentName:"admonition"},"You can create more complex filters composing the filter in the following way:"),(0,a.kt)("pre",{parentName:"admonition"},(0,a.kt)("code",{parentName:"pre"},"filter: `or(contains(id,1),contains(label,test))`,\n"))),(0,a.kt)("h2",{id:"sort"},"Sort"),(0,a.kt)("p",null,"For each ",(0,a.kt)("inlineCode",{parentName:"p"},"GET")," methods on Arke, Units, Parameters etc. is available a order parameters\nto sort the response through the ",(0,a.kt)("inlineCode",{parentName:"p"},"asc")," or ",(0,a.kt)("inlineCode",{parentName:"p"},"desc")," order for a specific parameter"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"client.arke\n    .getAll({ params: {\n        order: 'label;asc'\n    }})\n    .then((res) => {\n        // get Arke sorted by label with ascended order\n    })\n")),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"}," For more information look the ",(0,a.kt)("a",{parentName:"p",href:"https://arkemishub.github.io/arke-monorepo/docs/"},"complete API Reference of Client JS methods"))))}d.isMDXComponent=!0}}]);